<!DOCTYPE html>
<html lang="en">

<!-- CSS only -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX" crossorigin="anonymous">

<head>
  <meta charset="utf-8">
  <title>Weather Dashboard</title>
</head>

<!-- Image and Text Nav -->
<nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand">Weather Dashboard</a>
    <form class="form-inline">
      <input id="city-input" class="form-control mr-sm-2" type="search" placeholder="Search City" aria-label="Search">
      <button id="submit" class="btn btn-outline-info my-2 my-sm-0" type="submit">Weather It!</button>
    </form>
  </nav>

  <!-- List of Cities searched-->
  <ul class="" float="right"></ul>

  <body>
    <!-- Retrieved data will be dumped here -->
    <div class="city"></div><h4 id="date"></h4>
    <div class="temp"></div>
    <div class="humidity"></div>
    <div class="wind"></div>
    <div class="uvIndex"></div>

    <div class="weather_forecast"></div>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script type="text/javascript">
      // console.log('javascript')
        // onclick funtion for submit button
    
      $("#submit").on("click", function(event) {
        // console.log('clicked');
        // Preventing the submit button from trying to submit the form
        // We're optionally using a form so the user may hit Enter to search instead of clicking the button
        event.preventDefault();

        // Here we grab the text from the input box
        var cityWeather = $("#city-input").val();

       

        //QueryURL and API link
        var APIKey = "4c51b873bdfb944c8ab8d461c97a219a";
        var queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + cityWeather +"&appid=" + APIKey;
        
        console.log(queryURL);

        //Date 
        const now = moment().format('MMMM Do YYYY');
        let $dateHeading = $('#date');
        $dateHeading.text(now);
        
        // Forecast VAR
        // const forecasting = document.getElementsByClassName('5dayForecast')[0];

        // AJAX 
        $.ajax({
          url: queryURL,
          numRequest: 2,
          method: "GET"
        }).then(function(response) {
          console.log(response);
   
      // calculate temp
          const tempInF =(response.main.temp - 273.15) * 1.80 + 32;
  
          const cityEl = $('.city');
          const windEl = $('.wind');
          const humidityEl = $('.humidity');
          const tempEl = $('.temp');
          const UVIndexEl = $('.uvIndex');
  
          cityEl.html('<h1>' + response.name + ':</h1>');
          windEl.html('Wind Speed: ' + response.wind.speed);
          humidityEl.html('Humidity: ' + response.main.humidity);
          tempEl.html('Temperature(F): ' + tempInF.toFixed(2));
          
          // UV Index// 
          var lat = response.coord.lat;
          var lon = response.coord.lon;
          var UVIndexURL = "http://api.openweathermap.org/data/2.5/uvi?appid=" + APIKey + "&lat=" +lat + "&lon=" + lon;
          $.ajax({
            url: UVIndexURL,
            method: "GET",
          }).then(function (response) {
            console.log(UVIndexURL);
            console.log('UV Index');
            UVIndexEl.html('UV Index: '+ response.value);
        
        // END OF AJAX CALL //
          //     }); 
          // });   


        
        // //[forecast0, forecast1, ..., forecast4 ]
          
        // const forecast = [];
        // for(var i = 0; i<forecast.length; i++) {

        //   if(time.forecast.match(/12:00:00$/)) {
        //     document.getElementById(`forecast` + i).value = forecast[0].weather;
        //     //grab your forecast for the day
        //   }
        // }

        // // forecast.forEach(time => {
        // //   if(time.forecast.match(/12:00:00$/)) {
        // //     //grab your forecast for the day
        // //   }
        // // });

      

          // 5 Day weather forecast function//

        var forecastURL = "http://api.openweathermap.org/data/2.5/forecast?q=" + cityWeather + ",us&mode=xml&appid=" + APIKey;
        console.log(forecastURL)
